<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>微服务概览 | 雨中云居</title>
    <meta name="description" content="微服务概览">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.4d43a9e3.css" as="style"><link rel="preload" href="/assets/js/app.2f09ff3d.js" as="script"><link rel="preload" href="/assets/js/5.74ec0765.js" as="script"><link rel="preload" href="/assets/js/6.1b229177.js" as="script"><link rel="prefetch" href="/assets/js/1.c53ecec0.js"><link rel="prefetch" href="/assets/js/10.023159e0.js"><link rel="prefetch" href="/assets/js/11.025f9b8d.js"><link rel="prefetch" href="/assets/js/12.3b6a83a9.js"><link rel="prefetch" href="/assets/js/13.b9db9f21.js"><link rel="prefetch" href="/assets/js/14.f0a0d27e.js"><link rel="prefetch" href="/assets/js/15.f847b5b1.js"><link rel="prefetch" href="/assets/js/16.1eb044f7.js"><link rel="prefetch" href="/assets/js/17.7f057615.js"><link rel="prefetch" href="/assets/js/18.1c8e69b2.js"><link rel="prefetch" href="/assets/js/19.3a0212e5.js"><link rel="prefetch" href="/assets/js/20.7bd697d2.js"><link rel="prefetch" href="/assets/js/21.8969053f.js"><link rel="prefetch" href="/assets/js/22.2d3de7e9.js"><link rel="prefetch" href="/assets/js/23.4d86525b.js"><link rel="prefetch" href="/assets/js/24.53c1b64a.js"><link rel="prefetch" href="/assets/js/25.18f85102.js"><link rel="prefetch" href="/assets/js/26.aea4a9de.js"><link rel="prefetch" href="/assets/js/27.2819c090.js"><link rel="prefetch" href="/assets/js/28.417cefb4.js"><link rel="prefetch" href="/assets/js/29.b9848050.js"><link rel="prefetch" href="/assets/js/30.3bba88f0.js"><link rel="prefetch" href="/assets/js/31.3a0210cd.js"><link rel="prefetch" href="/assets/js/32.5e927a02.js"><link rel="prefetch" href="/assets/js/33.cb43ca24.js"><link rel="prefetch" href="/assets/js/34.c0e2184c.js"><link rel="prefetch" href="/assets/js/35.2603752d.js"><link rel="prefetch" href="/assets/js/36.5d2b162a.js"><link rel="prefetch" href="/assets/js/37.df45725b.js"><link rel="prefetch" href="/assets/js/38.8ec22f07.js"><link rel="prefetch" href="/assets/js/39.3d68f7b8.js"><link rel="prefetch" href="/assets/js/4.de60fea4.js"><link rel="prefetch" href="/assets/js/40.3a19b469.js"><link rel="prefetch" href="/assets/js/41.500fc3dd.js"><link rel="prefetch" href="/assets/js/42.6ac9cf39.js"><link rel="prefetch" href="/assets/js/43.c3ad6aac.js"><link rel="prefetch" href="/assets/js/44.61e4ad80.js"><link rel="prefetch" href="/assets/js/45.37bb92ea.js"><link rel="prefetch" href="/assets/js/7.bd2e9573.js"><link rel="prefetch" href="/assets/js/8.838426a4.js"><link rel="prefetch" href="/assets/js/9.1b478aea.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.e02251a5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4d43a9e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">雨中云居 </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/essay/" class="nav-link">软件随笔</a></li><li class="nav-item"><a href="/ms/" class="nav-link">微服务</a></li><li class="nav-item"><a href="/frontend/" class="nav-link">前端</a></li><li class="nav-item"><a href="https://github.com/shineyjg" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">雨中云居 </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/essay/" class="nav-link">软件随笔</a></li><li class="mobile-nav-item"><a href="/ms/" class="nav-link">微服务</a></li><li class="mobile-nav-item"><a href="/frontend/" class="nav-link">前端</a></li><li class="mobile-nav-item"><a href="https://github.com/shineyjg" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        微服务概览
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2018-08-23T00:00:00.000Z">
      2018-08-23
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-d832e844><a href="/tag/微服务" data-v-d832e844> 微服务 </a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="架构演进"><a href="#架构演进" aria-hidden="true" class="header-anchor">#</a> 架构演进</h2> <h3 id="_1-单一应用架构"><a href="#_1-单一应用架构" aria-hidden="true" class="header-anchor">#</a> 1. 单一应用架构</h3> <p><img src="/assets/img/single.07a7777d.png" alt="图片" title="图片"></p> <h3 id="_2-垂直应用架构"><a href="#_2-垂直应用架构" aria-hidden="true" class="header-anchor">#</a> 2. 垂直应用架构</h3> <p><img src="/assets/img/vertical.c70e7d87.png" alt="图片" title="图片"></p> <h3 id="_3-微服务架构"><a href="#_3-微服务架构" aria-hidden="true" class="header-anchor">#</a> 3. 微服务架构</h3> <p><img src="/assets/img/ms.75dd4a7c.png" alt="图片" title="图片"></p> <p><img src="/assets/img/ms_detail.cfbb881f.png" alt="图片" title="图片"></p> <h3 id="_4-微服务优点"><a href="#_4-微服务优点" aria-hidden="true" class="header-anchor">#</a> 4. 微服务优点</h3> <ul><li>简单</li> <li>灵活伸缩</li> <li>故障隔离</li> <li>支持异构技术</li></ul> <h3 id="_5-微服务缺点"><a href="#_5-微服务缺点" aria-hidden="true" class="header-anchor">#</a> 5. 微服务缺点</h3> <ul><li>分布式系统复杂性：网络延迟、版本控制、问题定位</li> <li>软硬件成本增加、运维额外开销</li> <li>更多技术：注册、限流降级、监控</li> <li>事务、异步、测试面临挑战</li></ul> <h3 id="_6-现状"><a href="#_6-现状" aria-hidden="true" class="header-anchor">#</a> 6. 现状</h3> <ul><li>SpringCloud、Dubbo等微服务主流开发框架盛行</li> <li>容器和微服务相辅相成，两大技术非常契合</li> <li>DevOps概念逐步深入人心</li> <li>Service Mesh下一代微服务框架抢滩登陆</li></ul> <h3 id="_7-挑战"><a href="#_7-挑战" aria-hidden="true" class="header-anchor">#</a> 7. 挑战</h3> <ul><li>服务的模块化与重构：如何划分模块、分配职责、设计接口</li> <li>服务粒度：缺乏统一的标准</li> <li>前端集成：容易成为单点</li> <li>资源监控和管理</li> <li>故障、恢复和自我修复</li> <li>组织文化和协调</li></ul> <h3 id="_8-前沿"><a href="#_8-前沿" aria-hidden="true" class="header-anchor">#</a> 8. 前沿</h3> <ul><li>服务网格</li> <li>事件驱动</li> <li>GraphQL</li> <li>混沌工程</li></ul> <h2 id="微服务实践"><a href="#微服务实践" aria-hidden="true" class="header-anchor">#</a> 微服务实践</h2> <h3 id="_1-技术选型"><a href="#_1-技术选型" aria-hidden="true" class="header-anchor">#</a> 1. 技术选型</h3> <ul><li>网关：  Spring Cloud Gateway</li> <li>注册中心：    Consul</li> <li>配置中心:   Apollo</li> <li>日志：  FELK</li> <li>API监控：  Hystrix+Turbine</li> <li>调用链监控：  Sleuth + Zipkin</li> <li>业务监控：  CAT</li> <li>物理机监控：  Zabbix</li> <li>服务依赖调用：  OpenFeign（REST）</li> <li>服务负载均衡：  Ribbon</li> <li>代码管理：  Gitlab</li> <li>持续集成:   Jenkins</li> <li>镜像：  Docker</li> <li>容器：    Kubernetes</li></ul> <h3 id="_2-网关"><a href="#_2-网关" aria-hidden="true" class="header-anchor">#</a> 2. 网关</h3> <p><img src="/assets/img/gateway.77bead1c.png" alt="图片" title="图片"></p> <h3 id="_3-服务注册、依赖和负载均衡，及灰度实现"><a href="#_3-服务注册、依赖和负载均衡，及灰度实现" aria-hidden="true" class="header-anchor">#</a> 3. 服务注册、依赖和负载均衡，及灰度实现</h3> <p><img src="/assets/img/registry.1a4081ad.png" alt="图片" title="图片"></p> <p><img src="/assets/img/gray.51bcdc53.png" alt="图片" title="图片"></p> <h3 id="_4-契约测试"><a href="#_4-契约测试" aria-hidden="true" class="header-anchor">#</a> 4. 契约测试</h3> <p><img src="/assets/img/contract.37dd25e7.jpg" alt="图片" title="图片"></p> <h3 id="_5-镜像自动生成和部署"><a href="#_5-镜像自动生成和部署" aria-hidden="true" class="header-anchor">#</a> 5. 镜像自动生成和部署</h3> <p><img src="/assets/img/ci.c593156c.png" alt="图片" title="图片"></p> <h3 id="_6-容器编排管理"><a href="#_6-容器编排管理" aria-hidden="true" class="header-anchor">#</a> 6. 容器编排管理</h3> <p><img src="/assets/img/k8s.a0824de5.png" alt="图片" title="图片"></p> <h3 id="_7-日志聚合elk"><a href="#_7-日志聚合elk" aria-hidden="true" class="header-anchor">#</a> 7. 日志聚合ELK</h3> <p><img src="/assets/img/elk.82c689e9.png" alt="图片" title="图片"></p> <h3 id="_8-zabbix监控"><a href="#_8-zabbix监控" aria-hidden="true" class="header-anchor">#</a> 8. Zabbix监控</h3> <p><img src="/assets/img/zabbix.e906d96b.png" alt="图片" title="图片"></p> <p><img src="/assets/img/zabbix2.d85d95b2.png" alt="图片" title="图片"></p> <h3 id="_9-api监控"><a href="#_9-api监控" aria-hidden="true" class="header-anchor">#</a> 9. API监控</h3> <p><img src="/assets/img/api.351bf3b4.jpeg" alt="图片" title="图片"></p> <h3 id="_10-cat调用链、业务监控"><a href="#_10-cat调用链、业务监控" aria-hidden="true" class="header-anchor">#</a> 10. CAT调用链、业务监控</h3> <p><img src="/assets/img/cat.8103df39.png" alt="图片" title="图片"></p> <h3 id="_11-spring微服务典型开发流程"><a href="#_11-spring微服务典型开发流程" aria-hidden="true" class="header-anchor">#</a> 11. Spring微服务典型开发流程</h3> <ul><li>开发基于spring-boot-starter-web业务微服务</li> <li>添加：consul discovery，actuator，apollo client， openfeign， hystrix等支持</li> <li>启动：本地consul容器，微服务，依赖微服务（可选），网关（可选）</li> <li>本地调试</li> <li>添加Dockerfile</li> <li>Push代码到gitlab的develop分支</li> <li>Gitlab自动构建镜像，并推送到镜像仓库（前期已经添加pipeline）</li> <li>Kubernetes添加或删除对应pod（删除后会自动pull新的镜像，生成新的容器并启动）</li> <li>Kubernets scale容器实例个数</li> <li>访问接口地址，查看各种监控、日志</li></ul> <h2 id="学习指南"><a href="#学习指南" aria-hidden="true" class="header-anchor">#</a> 学习指南</h2> <ul><li><p>注重基础技术（以Spring Cloud为例）</p> <ul><li>Java</li> <li>Spring Framework</li></ul></li> <li><p>重点把握</p> <ul><li>微观上：深入微服务各组件技术原理</li> <li>宏观上：组件间关系、组件在架构体系中所起的角色和作用</li> <li>特别关注影响系统高可用、可扩展、易维护的关键因素</li></ul></li> <li><p>除了开发：重视持续集成、部署、监控、运维</p></li> <li><p>关注微服务行业动态，跟进技术发展</p></li></ul></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#架构演进" title="架构演进">架构演进</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_1-单一应用架构" title="1. 单一应用架构">1. 单一应用架构</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-垂直应用架构" title="2. 垂直应用架构">2. 垂直应用架构</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_3-微服务架构" title="3. 微服务架构">3. 微服务架构</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_4-微服务优点" title="4. 微服务优点">4. 微服务优点</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_5-微服务缺点" title="5. 微服务缺点">5. 微服务缺点</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-现状" title="6. 现状">6. 现状</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-挑战" title="7. 挑战">7. 挑战</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_8-前沿" title="8. 前沿">8. 前沿</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#微服务实践" title="微服务实践">微服务实践</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_1-技术选型" title="1. 技术选型">1. 技术选型</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-网关" title="2. 网关">2. 网关</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_3-服务注册、依赖和负载均衡，及灰度实现" title="3. 服务注册、依赖和负载均衡，及灰度实现">3. 服务注册、依赖和负载均衡，及灰度实现</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_4-契约测试" title="4. 契约测试">4. 契约测试</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_5-镜像自动生成和部署" title="5. 镜像自动生成和部署">5. 镜像自动生成和部署</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-容器编排管理" title="6. 容器编排管理">6. 容器编排管理</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-日志聚合elk" title="7. 日志聚合ELK">7. 日志聚合ELK</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_8-zabbix监控" title="8. Zabbix监控">8. Zabbix监控</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_9-api监控" title="9. API监控">9. API监控</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_10-cat调用链、业务监控" title="10. CAT调用链、业务监控">10. CAT调用链、业务监控</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_11-spring微服务典型开发流程" title="11. Spring微服务典型开发流程">11. Spring微服务典型开发流程</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#学习指南" title="学习指南">学习指南</a></div></div></div></div> <footer class="footer" data-v-fdbf4940><div class="footer-left-wrap" data-v-fdbf4940><ul class="contact" data-v-fdbf4940><li class="contact-item" data-v-fdbf4940><a href="https://github.com/shineyjg" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-fdbf4940><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-fdbf4940><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-fdbf4940></path></svg>
          
        </a></li><li class="contact-item" data-v-fdbf4940><a href="mailto:shineyjg@gmail.com" class="nav-link external" data-v-fdbf4940><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail" data-v-fdbf4940><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-fdbf4940></path><polyline points="22,6 12,13 2,6" data-v-fdbf4940></polyline></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-fdbf4940><ul class="copyright" data-v-fdbf4940><li class="copyright-item" data-v-fdbf4940><a href="/" class="nav-link" data-v-fdbf4940>Vincent © 2020</a></li></ul></div></footer></div><div class="global-ui"><SWUpdatePopup></SWUpdatePopup></div></div>
    <script src="/assets/js/app.2f09ff3d.js" defer></script><script src="/assets/js/5.74ec0765.js" defer></script><script src="/assets/js/6.1b229177.js" defer></script>
  </body>
</html>
